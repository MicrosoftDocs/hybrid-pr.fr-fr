---
title: Modèle DevOps dans Azure Stack Hub
description: Découvrez le modèle DevOps afin de pouvoir garantir la cohérence entre les déploiements dans Azure et Azure Stack Hub.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 306cc9604a8e919724f9f76b7e5122d534d2d1ae
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 06/17/2020
ms.locfileid: "84910422"
---
# <a name="devops-pattern"></a><span data-ttu-id="89ec3-103">Modèle DevOps</span><span class="sxs-lookup"><span data-stu-id="89ec3-103">DevOps pattern</span></span>

<span data-ttu-id="89ec3-104">Développez à partir d’un seul emplacement et effectuez vos déploiements sur plusieurs cibles dans des environnements de développement, de test et de production qui peuvent se trouver dans votre centre de données local, vos clouds privés ou le cloud public.</span><span class="sxs-lookup"><span data-stu-id="89ec3-104">Code from a single location and deploy to multiple targets in development, test, and production environments that may be in your local datacenter, private clouds, or the public cloud.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="89ec3-105">Contexte et problème</span><span class="sxs-lookup"><span data-stu-id="89ec3-105">Context and problem</span></span>

<span data-ttu-id="89ec3-106">La continuité, la sécurité et la fiabilité du déploiement d’applications sont essentielles pour les organisations et critiques pour les équipes de développement.</span><span class="sxs-lookup"><span data-stu-id="89ec3-106">Application deployment continuity, security, and reliability are essential to organizations and critical to development teams.</span></span>

<span data-ttu-id="89ec3-107">Les applications nécessitent souvent du code refactorisé pour s’exécuter dans chaque environnement cible.</span><span class="sxs-lookup"><span data-stu-id="89ec3-107">Apps often require refactored code to run in each target environment.</span></span> <span data-ttu-id="89ec3-108">Cela signifie qu’une application n’est pas complètement portable.</span><span class="sxs-lookup"><span data-stu-id="89ec3-108">This means that an app isn't completely portable.</span></span> <span data-ttu-id="89ec3-109">Elle doit être mise à jour, testée et validée au fur et à mesure de son déplacement dans chaque environnement.</span><span class="sxs-lookup"><span data-stu-id="89ec3-109">It must be updated, tested, and validated as it moves through each environment.</span></span> <span data-ttu-id="89ec3-110">Par exemple, le code écrit dans un environnement de développement doit ensuite être réécrit pour fonctionner dans un environnement de test, puis réécrit quand il arrive enfin dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="89ec3-110">For example, code written in a development environment must then be rewritten to work in a test environment and rewritten when it finally lands in a production environment.</span></span> <span data-ttu-id="89ec3-111">De plus, ce code est spécifiquement lié à l’hôte.</span><span class="sxs-lookup"><span data-stu-id="89ec3-111">Furthermore, this code is specifically tied to the host.</span></span> <span data-ttu-id="89ec3-112">Cela se traduit par une hausse des coûts et de la complexité de la maintenance de votre application.</span><span class="sxs-lookup"><span data-stu-id="89ec3-112">This increases the cost and complexity of maintaining your app.</span></span> <span data-ttu-id="89ec3-113">Chaque version de l’application est liée à chaque environnement.</span><span class="sxs-lookup"><span data-stu-id="89ec3-113">Each version of the app is tied to each environment.</span></span> <span data-ttu-id="89ec3-114">L’accroissement de la complexité et les problèmes de duplication augmentent les risques liés à la sécurité et à la qualité du code.</span><span class="sxs-lookup"><span data-stu-id="89ec3-114">The increased complexity and duplication increase the risk of security and code quality.</span></span> <span data-ttu-id="89ec3-115">De plus, vous ne pouvez pas facilement redéployer le code quand vous supprimez des hôtes défaillants ou quand vous déployez des hôtes supplémentaires pour gérer la hausse de la demande.</span><span class="sxs-lookup"><span data-stu-id="89ec3-115">In addition, the code can't be readily redeployed when you remove restore failed hosts or deploy additional hosts to handle increases in demand.</span></span>

## <a name="solution"></a><span data-ttu-id="89ec3-116">Solution</span><span class="sxs-lookup"><span data-stu-id="89ec3-116">Solution</span></span>

<span data-ttu-id="89ec3-117">Le modèle DevOps vous permet de générer, tester et déployer une application qui s’exécute dans plusieurs clouds.</span><span class="sxs-lookup"><span data-stu-id="89ec3-117">The DevOps Pattern enables you to build, test, and deploy an app that runs on multiple clouds.</span></span> <span data-ttu-id="89ec3-118">Ce modèle unit la pratique de l’intégration continue et de la livraison continue.</span><span class="sxs-lookup"><span data-stu-id="89ec3-118">This pattern unites the practice of continuous integration and continuous delivery.</span></span> <span data-ttu-id="89ec3-119">Avec l’intégration continue, le code est généré et testé chaque fois qu’un membre de l’équipe commite un changement apporté à la gestion de versions.</span><span class="sxs-lookup"><span data-stu-id="89ec3-119">With continuous integration, code is built and tested every time a team member commits a change to version control.</span></span> <span data-ttu-id="89ec3-120">La livraison continue automatise chaque étape comprise entre une build et un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="89ec3-120">Continuous delivery automates each step from a build to a production environment.</span></span> <span data-ttu-id="89ec3-121">Ensemble, ces opérations constituent un processus de mise en production qui prend en charge le déploiement sur divers environnements.</span><span class="sxs-lookup"><span data-stu-id="89ec3-121">Together, these processes create a release process that supports deployment across diverse environments.</span></span> <span data-ttu-id="89ec3-122">Avec ce modèle, vous pouvez créer un brouillon de votre code et le déployer ensuite sur un environnement local, des clouds privés distincts et les clouds publics.</span><span class="sxs-lookup"><span data-stu-id="89ec3-122">With this pattern, you can draft your code and then deploy the same code to a premise environment, different private clouds, and the public clouds.</span></span> <span data-ttu-id="89ec3-123">Pour tenir compte des différences d’environnement, il vous suffit d’apporter des changements à un fichier config au lieu du code.</span><span class="sxs-lookup"><span data-stu-id="89ec3-123">Differences in environment require a change to a configuration file rather than changes to the code.</span></span>

![Modèle DevOps](media/pattern-cicd-pipeline/hybrid-ci-cd.png)

<span data-ttu-id="89ec3-125">Avec un ensemble cohérent d’outils de développement dans les environnements locaux, de clouds privés et de clouds publics, vous pouvez implémenter une pratique d’intégration continue et de livraison continue.</span><span class="sxs-lookup"><span data-stu-id="89ec3-125">With a consistent set of development tools across on-premises, private cloud, and public cloud environments, you can implement a practice of continuous integration and continuous delivery.</span></span> <span data-ttu-id="89ec3-126">Les applications et services déployés à l’aide du modèle DevOps sont interchangeables et peuvent s’exécuter dans n’importe lequel de ces emplacements, en tirant parti des fonctionnalités et capacités d’un environnement local et du cloud public.</span><span class="sxs-lookup"><span data-stu-id="89ec3-126">Apps and services deployed using the DevOps Pattern are interchangeable and can run in any of these locations, taking advantage of on-premises and public cloud features and capabilities.</span></span>

<span data-ttu-id="89ec3-127">L’utilisation d’un pipeline de mise en production DevOps vous aide à :</span><span class="sxs-lookup"><span data-stu-id="89ec3-127">Using a DevOps release pipeline helps you:</span></span>

- <span data-ttu-id="89ec3-128">Lancer une nouvelle build basée sur des validations de code dans un seul dépôt</span><span class="sxs-lookup"><span data-stu-id="89ec3-128">Initiate a new build based on code commits to a single repository.</span></span>
- <span data-ttu-id="89ec3-129">Déployer automatiquement le code récemment généré sur le cloud public pour les tests d’acceptation utilisateur</span><span class="sxs-lookup"><span data-stu-id="89ec3-129">Automatically deploy your newly built code to the public cloud for user acceptance testing.</span></span>
- <span data-ttu-id="89ec3-130">Déployer automatiquement le code sur un cloud privé, une fois qu’il a réussi les tests</span><span class="sxs-lookup"><span data-stu-id="89ec3-130">Automatically deploy to a private cloud once your code has passed testing.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="89ec3-131">Problèmes et considérations</span><span class="sxs-lookup"><span data-stu-id="89ec3-131">Issues and considerations</span></span>

<span data-ttu-id="89ec3-132">Le modèle DevOps est destiné à assurer la cohérence entre les déploiements, quel que soit l’environnement cible.</span><span class="sxs-lookup"><span data-stu-id="89ec3-132">The DevOps Pattern is intended to ensure consistency across deployments regardless of the target environment.</span></span> <span data-ttu-id="89ec3-133">Toutefois, les fonctionnalités varient selon les environnements cloud et locaux.</span><span class="sxs-lookup"><span data-stu-id="89ec3-133">However, capabilities vary across cloud and on-premises environments.</span></span> <span data-ttu-id="89ec3-134">Observez les points suivants :</span><span class="sxs-lookup"><span data-stu-id="89ec3-134">Consider the following points:</span></span>

- <span data-ttu-id="89ec3-135">Les fonctions, les points de terminaison, les services et autres ressources de votre déploiement sont-ils disponibles dans les emplacements de déploiement cibles ?</span><span class="sxs-lookup"><span data-stu-id="89ec3-135">Are the functions, endpoints, services, and other resources in your deployment available in the target deployment locations?</span></span>
- <span data-ttu-id="89ec3-136">Les artefacts de configuration sont-ils stockés dans des emplacements accessibles parmi les différents clouds ?</span><span class="sxs-lookup"><span data-stu-id="89ec3-136">Are configuration artifacts stored in locations that are accessible across clouds?</span></span>
- <span data-ttu-id="89ec3-137">Les paramètres de déploiement vont-ils fonctionner dans tous les environnements cibles ?</span><span class="sxs-lookup"><span data-stu-id="89ec3-137">Will deployment parameters work in all the target environments?</span></span>
- <span data-ttu-id="89ec3-138">Les propriétés spécifiques aux ressources sont-elles disponibles dans tous les clouds cibles ?</span><span class="sxs-lookup"><span data-stu-id="89ec3-138">Are resource-specific properties available in all target clouds?</span></span>

<span data-ttu-id="89ec3-139">Pour plus d’informations, consultez [Développer des modèles Azure Resource Manager de cohérence du cloud](https://docs.microsoft.com/azure/azure-resource-manager/templates-cloud-consistency).</span><span class="sxs-lookup"><span data-stu-id="89ec3-139">For more information, see [Develop Azure Resource Manager templates for cloud consistency](https://docs.microsoft.com/azure/azure-resource-manager/templates-cloud-consistency).</span></span>

<span data-ttu-id="89ec3-140">De plus, prenez en compte les points suivants pour décider du mode d’implémentation de ce modèle :</span><span class="sxs-lookup"><span data-stu-id="89ec3-140">In addition, consider the following points when deciding how to implement this pattern:</span></span>

### <a name="scalability"></a><span data-ttu-id="89ec3-141">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="89ec3-141">Scalability</span></span>

<span data-ttu-id="89ec3-142">Les systèmes d’automation du déploiement constituent le point de contrôle clé des modèles DevOps.</span><span class="sxs-lookup"><span data-stu-id="89ec3-142">Deployment automation systems are the key control point in the DevOps Patterns.</span></span> <span data-ttu-id="89ec3-143">Les implémentations peuvent varier.</span><span class="sxs-lookup"><span data-stu-id="89ec3-143">Implementations can vary.</span></span> <span data-ttu-id="89ec3-144">La sélection de la taille de serveur appropriée dépend de la taille de la charge de travail attendue.</span><span class="sxs-lookup"><span data-stu-id="89ec3-144">The selection of the correct server size depends on the size of the expected workload.</span></span> <span data-ttu-id="89ec3-145">La mise à l’échelle des machines virtuelles coûte plus cher que celle des conteneurs.</span><span class="sxs-lookup"><span data-stu-id="89ec3-145">VMs cost more to scale than containers.</span></span> <span data-ttu-id="89ec3-146">Toutefois, pour mettre des conteneurs à l’échelle, votre processus de génération doit s’exécuter avec des conteneurs.</span><span class="sxs-lookup"><span data-stu-id="89ec3-146">To use containers for scaling, however, your build process must run with containers.</span></span>

### <a name="availability"></a><span data-ttu-id="89ec3-147">Disponibilité</span><span class="sxs-lookup"><span data-stu-id="89ec3-147">Availability</span></span>

<span data-ttu-id="89ec3-148">Dans le contexte d’un modèle DevOps, la disponibilité signifie la capacité à récupérer les informations d’état associées à votre workflow, par exemple les résultats des tests, les dépendances du code ou d’autres artefacts.</span><span class="sxs-lookup"><span data-stu-id="89ec3-148">Availability in the context of the DevPattern means being able to recover any state information associated with your workflow, such as test results, code dependencies, or other artifacts.</span></span> <span data-ttu-id="89ec3-149">Pour évaluer les exigences de disponibilité, tenez compte des deux mesures courantes :</span><span class="sxs-lookup"><span data-stu-id="89ec3-149">To assess your availability requirements, consider two common metrics:</span></span>

- <span data-ttu-id="89ec3-150">Le RTO (objectif de délai de récupération) spécifie la durée pendant laquelle vous pouvez vous passer d’un système.</span><span class="sxs-lookup"><span data-stu-id="89ec3-150">Recovery Time Objective (RTO) specifies how long you can go without a system.</span></span>

- <span data-ttu-id="89ec3-151">Le RPO (objectif de point de récupération) indique la quantité de données que vous pouvez vous permettre de perdre si une interruption de service affecte le système.</span><span class="sxs-lookup"><span data-stu-id="89ec3-151">Recovery Point Objective (RPO) indicates how much data you can afford to lose if a disruption in service affects the system.</span></span>

<span data-ttu-id="89ec3-152">Dans la pratique, le RTO et le RPO impliquent une redondance et une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="89ec3-152">In practice, RTO, and RPO imply redundancy and backup.</span></span> <span data-ttu-id="89ec3-153">Dans le cloud Azure mondial, la disponibilité n’est pas une question de récupération du matériel, elle fait partie intégrante d’Azure. Vous devez plutôt assurer la maintenance de l’état de vos systèmes DevOps.</span><span class="sxs-lookup"><span data-stu-id="89ec3-153">On the global Azure cloud, availability isn't a question of hardware recovery—that's part of Azure—but rather ensuring you maintain the state of your DevOps systems.</span></span> <span data-ttu-id="89ec3-154">Avec Azure Stack Hub, la récupération du matériel peut être un facteur à prendre en compte.</span><span class="sxs-lookup"><span data-stu-id="89ec3-154">On Azure Stack Hub, hardware recovery may be a consideration.</span></span>

<span data-ttu-id="89ec3-155">Il existe d’autres éléments importants à prendre en compte durant la conception du système utilisé pour l’automation du déploiement. Il s’agit du contrôle d’accès et de la gestion appropriée des droits nécessaires au déploiement des services sur les environnements cloud.</span><span class="sxs-lookup"><span data-stu-id="89ec3-155">Another major consideration when designing the system used for deployment automation is access control and the proper management of the rights needed to deploy services to cloud environments.</span></span> <span data-ttu-id="89ec3-156">Quels sont les droits nécessaires pour créer, supprimer ou modifier des déploiements ?</span><span class="sxs-lookup"><span data-stu-id="89ec3-156">What rights are needed to create, delete, or modify deployments?</span></span> <span data-ttu-id="89ec3-157">Par exemple, vous avez généralement besoin d’un ensemble de droits pour créer un groupe de ressources dans Azure et d’un autre ensemble de droits pour déployer les services sur le groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="89ec3-157">For example, one set of rights is typically required to create a resource group in Azure and another to deploy services in the resource group.</span></span>

### <a name="manageability"></a><span data-ttu-id="89ec3-158">Simplicité de gestion</span><span class="sxs-lookup"><span data-stu-id="89ec3-158">Manageability</span></span>

<span data-ttu-id="89ec3-159">La conception d’un système basé sur le modèle DevOps doit prendre en compte l’automatisation, la journalisation et les alertes pour chaque service du portefeuille.</span><span class="sxs-lookup"><span data-stu-id="89ec3-159">The design of any system based on the DevOps pattern must consider automation, logging, and alerting for each service across the portfolio.</span></span> <span data-ttu-id="89ec3-160">Utilisez des services partagés, une équipe d’application, ou les deux, et suivez également les stratégies de sécurité et la gouvernance.</span><span class="sxs-lookup"><span data-stu-id="89ec3-160">Use shared services, an application team, or both, and track security policies and governance as well.</span></span>

<span data-ttu-id="89ec3-161">Déployez les environnements de production et les environnements de développement/test dans des groupes de ressources distincts sur Azure ou Azure Stack Hub.</span><span class="sxs-lookup"><span data-stu-id="89ec3-161">Deploy production environments and development/test environments in separate resource groups on Azure or Azure Stack Hub.</span></span> <span data-ttu-id="89ec3-162">Vous pouvez ensuite superviser les ressources de chaque environnement et totaliser les coûts de facturation par groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="89ec3-162">Then you can monitor each environment's resources and roll up billing costs by resource group.</span></span> <span data-ttu-id="89ec3-163">Vous pouvez également supprimer des ressources comme un tout, ce qui est pratique pour les déploiements de test.</span><span class="sxs-lookup"><span data-stu-id="89ec3-163">You can also delete resources as a set, which is useful for test deployments.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="89ec3-164">Quand utiliser ce modèle</span><span class="sxs-lookup"><span data-stu-id="89ec3-164">When to use this pattern</span></span>

<span data-ttu-id="89ec3-165">Utilisez ce modèle si :</span><span class="sxs-lookup"><span data-stu-id="89ec3-165">Use this pattern if:</span></span>

- <span data-ttu-id="89ec3-166">Vous pouvez développer du code dans un environnement qui répond aux besoins de vos développeurs et le déployer sur un environnement propre à votre solution, où il peut être difficile de développer un nouveau code.</span><span class="sxs-lookup"><span data-stu-id="89ec3-166">You can develop code in one environment that meets the needs of your developers, and deploy to an environment specific to your solution where it may be difficult to develop new code.</span></span>
- <span data-ttu-id="89ec3-167">Vous pouvez utiliser le code et les outils souhaités par vos développeurs, du moment que ces derniers peuvent suivre le processus d’intégration continue et de livraison continue du modèle DevOps.</span><span class="sxs-lookup"><span data-stu-id="89ec3-167">You can use the code and tools your developers would like, as long as they're able to follow the continuous integration and continuous delivery process in the DevOps Pattern.</span></span>

<span data-ttu-id="89ec3-168">Ce modèle n’est pas recommandé :</span><span class="sxs-lookup"><span data-stu-id="89ec3-168">This pattern isn't recommended:</span></span>

- <span data-ttu-id="89ec3-169">Si vous ne pouvez pas automatiser les tâches relatives à l’infrastructure, au provisionnement des ressources, à la configuration, aux identités et à la sécurité.</span><span class="sxs-lookup"><span data-stu-id="89ec3-169">If you can't automate infrastructure, provisioning resources, configuration, identity, and security tasks.</span></span>
- <span data-ttu-id="89ec3-170">Si les équipes n’ont pas accès aux ressources cloud hybrides pour implémenter une approche CI/CD (intégration continue/développement continu).</span><span class="sxs-lookup"><span data-stu-id="89ec3-170">If teams don't have access to hybrid cloud resources to implement a Continuous Integration/Continuous Development (CI/CD) approach.</span></span>

## <a name="next-steps"></a><span data-ttu-id="89ec3-171">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="89ec3-171">Next steps</span></span>

<span data-ttu-id="89ec3-172">Pour en savoir plus sur les sujets abordés dans cet article :</span><span class="sxs-lookup"><span data-stu-id="89ec3-172">To learn more about topics introduced in this article:</span></span>

- <span data-ttu-id="89ec3-173">Consultez la documentation [Azure DevOps](/azure/devops) pour en savoir plus sur Azure DevOps et les outils associés, notamment Azure Repos et Azure Pipelines.</span><span class="sxs-lookup"><span data-stu-id="89ec3-173">See the [Azure DevOps documentation](/azure/devops) to learn more about Azure DevOps and related tools, including Azure Repos, and Azure Pipelines.</span></span>
- <span data-ttu-id="89ec3-174">Consultez [Famille de produits et de solutions Azure Stack](/azure-stack) pour en savoir plus sur l’ensemble du portefeuille de produits et de solutions.</span><span class="sxs-lookup"><span data-stu-id="89ec3-174">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="89ec3-175">Lorsque vous êtes prêt à tester l’exemple de solution, poursuivez avec le [Guide de déploiement d’une solution CI/CD hybride DevOps](https://aka.ms/hybriddevopsdeploy).</span><span class="sxs-lookup"><span data-stu-id="89ec3-175">When you're ready to test the solution example, continue with the [DevOps hybrid CI/CD solution deployment guide](https://aka.ms/hybriddevopsdeploy).</span></span> <span data-ttu-id="89ec3-176">Ce guide de déploiement fournit des instructions pas à pas sur le déploiement et sur le test de ses composants.</span><span class="sxs-lookup"><span data-stu-id="89ec3-176">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span> <span data-ttu-id="89ec3-177">Découvrez comment déployer une application sur Azure et Azure Stack Hub à l’aide d’un pipeline d’intégration continue/de livraison continue (CI/CD) hybride.</span><span class="sxs-lookup"><span data-stu-id="89ec3-177">You learn how to deploy an app to Azure and Azure Stack Hub using a hybrid continuous integration/continuous delivery (CI/CD) pipeline.</span></span>
